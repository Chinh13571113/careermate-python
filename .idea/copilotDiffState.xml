<?xml version="1.0" encoding="UTF-8"?>
<project version="4">
  <component name="CopilotDiffPersistence">
    <option name="pendingDiffs">
      <map>
        <entry key="$PROJECT_DIR$/Careermate/settings.py">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/Careermate/settings.py" />
              <option name="originalContent" value="from pathlib import Path&#10;import os&#10;import warnings&#10;from dotenv import load_dotenv&#10;&#10;# Suppress Triton warnings about missing CUDA binaries (for CPU-only PyTorch usage)&#10;warnings.filterwarnings('ignore', message='Failed to find.*', module='triton.knobs')&#10;&#10;BASE_DIR = Path(__file__).resolve().parent.parent&#10;&#10;load_dotenv()&#10;&#10;SPRING_BOOT_JWT_SECRET = os.environ.get(&quot;SPRING_BOOT_JWT_SECRET&quot;, &quot;default-jwt-secret-key-change-in-production&quot;)&#10;&#10;SECRET_KEY = os.environ.get('DJANGO_SECRET_KEY', 'django-insecure-your-secret-key')&#10;DEBUG = os.environ.get('DEBUG', 'True') == 'True'&#10;ALLOWED_HOSTS = os.environ.get('ALLOWED_HOSTS', '*').split(',')&#10;&#10;INSTALLED_APPS = [&#10;    # 'django.contrib.admin',&#10;    'django.contrib.auth',&#10;    'django.contrib.contenttypes',&#10;    'django.contrib.sessions',&#10;    'django.contrib.messages',&#10;    'django.contrib.staticfiles',&#10;    'rest_framework',&#10;    'drf_spectacular',&#10;    'corsheaders',  # Add CORS headers support&#10;    # Add your app&#10;    'apps.recommendation_agent',&#10;    'apps.cv_creation_agent',&#10;    'apps.cv_analysis_agent',&#10;    'apps.swagger.apps.SwaggerConfig',&#10;]&#10;&#10;REST_FRAMEWORK = {&#10;    'DEFAULT_AUTHENTICATION_CLASSES': [&#10;        'apps.swagger.authentication.BearerAuthentication',&#10;    ],&#10;    'DEFAULT_PERMISSION_CLASSES': [&#10;        'rest_framework.permissions.IsAuthenticated',  # Require authentication by default&#10;    ],&#10;    'DEFAULT_SCHEMA_CLASS': 'drf_spectacular.openapi.AutoSchema',&#10;}&#10;&#10;SPECTACULAR_SETTINGS = {&#10;    'TITLE': 'Careermate API',&#10;    'DESCRIPTION': 'API documentation with Swagger UI',&#10;    'VERSION': '1.0.0',&#10;    'SERVE_INCLUDE_SCHEMA': False,&#10;    'SECURITY': [{'bearerAuth': []}],&#10;    'COMPONENT_SPLIT_REQUEST': True,&#10;}&#10;&#10;MIDDLEWARE = [&#10;    'django.middleware.security.SecurityMiddleware',&#10;    'django.contrib.sessions.middleware.SessionMiddleware',&#10;    'corsheaders.middleware.CorsMiddleware',  # Add CORS middleware here (before CommonMiddleware)&#10;    'django.middleware.common.CommonMiddleware',&#10;    'django.middleware.csrf.CsrfViewMiddleware',&#10;    'django.contrib.auth.middleware.AuthenticationMiddleware',&#10;    'django.contrib.messages.middleware.MessageMiddleware',&#10;    'django.middleware.clickjacking.XFrameOptionsMiddleware',&#10;]&#10;&#10;ROOT_URLCONF = 'Careermate.urls'&#10;&#10;TEMPLATES = [&#10;    {&#10;        'BACKEND': 'django.template.backends.django.DjangoTemplates',&#10;        'DIRS': [],&#10;        'APP_DIRS': True,&#10;        'OPTIONS': {&#10;            'context_processors': [&#10;                'django.template.context_processors.debug',&#10;                'django.template.context_processors.request',&#10;                'django.contrib.auth.context_processors.auth',&#10;                'django.contrib.messages.context_processors.messages',&#10;            ],&#10;        },&#10;    },&#10;]&#10;&#10;WSGI_APPLICATION = 'Careermate.wsgi.application'&#10;&#10;DATABASES = {&#10;    'default': {&#10;        'ENGINE': 'django.db.backends.postgresql',&#10;        'NAME': os.environ.get('POSTGRES_DB', 'MyPostgresDB'),&#10;        'USER': os.environ.get('POSTGRES_USER', 'root'),&#10;        'PASSWORD': os.environ.get('POSTGRES_PASSWORD', '123456'),&#10;        'HOST': os.environ.get('POSTGRES_HOST', 'postgres'),&#10;        'PORT': os.environ.get('POSTGRES_PORT', '5439'),&#10;    },&#10;}&#10;&#10;CELERY_BEAT_SCHEDULE = {&#10;    &quot;retrain-cf-model-every-6h&quot;: {&#10;        &quot;task&quot;: &quot;apps.recommendations.tasks.train_cf_model_task&quot;,&#10;        &quot;schedule&quot;: 21600.0,  # 6 giờ&#10;    },&#10;}&#10;&#10;&#10;AUTH_PASSWORD_VALIDATORS = []&#10;&#10;LANGUAGE_CODE = 'en-us'&#10;TIME_ZONE = 'Asia/Ho_Chi_Minh'&#10;USE_I18N = True&#10;USE_TZ = True&#10;&#10;STATIC_URL = 'static/'&#10;STATIC_ROOT = os.path.join(BASE_DIR, 'staticfiles')&#10;STATICFILES_DIRS = []&#10;&#10;DEFAULT_AUTO_FIELD = 'django.db.models.BigAutoField'&#10;&#10;# Celery Configuration&#10;CELERY_BROKER_URL = os.environ.get('CELERY_BROKER_URL', 'redis://redis:6379/0')&#10;CELERY_RESULT_BACKEND = os.environ.get('CELERY_RESULT_BACKEND', 'redis://redis:6379/0')&#10;CELERY_TASK_TRACK_STARTED = True&#10;CELERY_TASK_TIME_LIMIT = int(os.environ.get(&quot;CELERY_TASK_TIME_LIMIT&quot;, &quot;1800&quot;))  # 30 minutes default&#10;CELERY_ACCEPT_CONTENT = ['json']&#10;CELERY_TASK_SERIALIZER = 'json'&#10;CELERY_RESULT_SERIALIZER = 'json'&#10;&#10;# CORS Configuration&#10;CORS_ALLOWED_ORIGINS = [&#10;    &quot;http://localhost:3000&quot;,  # React default port&#10;    &quot;http://localhost:5173&quot;,  # Vite default port&#10;    &quot;http://localhost:4200&quot;,  # Angular default port&#10;    &quot;http://localhost:8080&quot;,  # Vue default port&#10;    &quot;http://127.0.0.1:3000&quot;,&#10;    &quot;http://127.0.0.1:5173&quot;,&#10;    &quot;http://127.0.0.1:4200&quot;,&#10;    &quot;http://127.0.0.1:8080&quot;,&#10;    &quot;null&quot;,  # Allow file:// protocol for local HTML testing&#10;]&#10;&#10;# Allow credentials (cookies, authorization headers, etc.)&#10;CORS_ALLOW_CREDENTIALS = True&#10;&#10;# Allow all headers and methods for development&#10;CORS_ALLOW_HEADERS = [&#10;    'accept',&#10;    'accept-encoding',&#10;    'authorization',&#10;    'content-type',&#10;    'dnt',&#10;    'origin',&#10;    'user-agent',&#10;    'x-csrftoken',&#10;    'x-requested-with',&#10;]&#10;&#10;CORS_ALLOW_METHODS = [&#10;    'DELETE',&#10;    'GET',&#10;    'OPTIONS',&#10;    'PATCH',&#10;    'POST',&#10;    'PUT',&#10;]&#10;&#10;# For production, you should also update ALLOWED_HOSTS&#10;# ALLOWED_HOSTS = ['yourdomain.com', 'www.yourdomain.com']&#10;" />
              <option name="updatedContent" value="from pathlib import Path&#10;import os&#10;import warnings&#10;from dotenv import load_dotenv&#10;&#10;# Suppress Triton warnings about missing CUDA binaries (for CPU-only PyTorch usage)&#10;warnings.filterwarnings('ignore', message='Failed to find.*', module='triton.knobs')&#10;&#10;BASE_DIR = Path(__file__).resolve().parent.parent&#10;&#10;load_dotenv()&#10;&#10;SPRING_BOOT_JWT_SECRET = os.environ.get(&quot;SPRING_BOOT_JWT_SECRET&quot;, &quot;default-jwt-secret-key-change-in-production&quot;)&#10;&#10;SECRET_KEY = os.environ.get('DJANGO_SECRET_KEY', 'django-insecure-your-secret-key')&#10;DEBUG = os.environ.get('DEBUG', 'True') == 'True'&#10;ALLOWED_HOSTS = os.environ.get('ALLOWED_HOSTS', '*').split(',')&#10;&#10;INSTALLED_APPS = [&#10;    # 'django.contrib.admin',&#10;    'django.contrib.auth',&#10;    'django.contrib.contenttypes',&#10;    'django.contrib.sessions',&#10;    'django.contrib.messages',&#10;    'django.contrib.staticfiles',&#10;    'rest_framework',&#10;    'drf_spectacular',&#10;    'corsheaders',  # Add CORS headers support&#10;    # Add your app&#10;    'apps.recommendation_agent',&#10;    'apps.cv_creation_agent',&#10;    'apps.cv_analysis_agent',&#10;    'apps.swagger.apps.SwaggerConfig',&#10;]&#10;&#10;REST_FRAMEWORK = {&#10;    'DEFAULT_AUTHENTICATION_CLASSES': [&#10;        'apps.swagger.authentication.BearerAuthentication',&#10;    ],&#10;    'DEFAULT_PERMISSION_CLASSES': [&#10;        'rest_framework.permissions.IsAuthenticated',  # Require authentication by default&#10;    ],&#10;    'DEFAULT_SCHEMA_CLASS': 'drf_spectacular.openapi.AutoSchema',&#10;}&#10;&#10;SPECTACULAR_SETTINGS = {&#10;    'TITLE': 'Careermate API',&#10;    'DESCRIPTION': 'API documentation with Swagger UI',&#10;    'VERSION': '1.0.0',&#10;    'SERVE_INCLUDE_SCHEMA': False,&#10;    'SECURITY': [{'bearerAuth': []}],&#10;    'COMPONENT_SPLIT_REQUEST': True,&#10;}&#10;&#10;MIDDLEWARE = [&#10;    'django.middleware.security.SecurityMiddleware',&#10;    'django.contrib.sessions.middleware.SessionMiddleware',&#10;    'corsheaders.middleware.CorsMiddleware',  # Add CORS middleware here (before CommonMiddleware)&#10;    'django.middleware.common.CommonMiddleware',&#10;    'django.middleware.csrf.CsrfViewMiddleware',&#10;    'django.contrib.auth.middleware.AuthenticationMiddleware',&#10;    'django.contrib.messages.middleware.MessageMiddleware',&#10;    'django.middleware.clickjacking.XFrameOptionsMiddleware',&#10;]&#10;&#10;ROOT_URLCONF = 'Careermate.urls'&#10;&#10;TEMPLATES = [&#10;    {&#10;        'BACKEND': 'django.template.backends.django.DjangoTemplates',&#10;        'DIRS': [],&#10;        'APP_DIRS': True,&#10;        'OPTIONS': {&#10;            'context_processors': [&#10;                'django.template.context_processors.debug',&#10;                'django.template.context_processors.request',&#10;                'django.contrib.auth.context_processors.auth',&#10;                'django.contrib.messages.context_processors.messages',&#10;            ],&#10;        },&#10;    },&#10;]&#10;&#10;WSGI_APPLICATION = 'Careermate.wsgi.application'&#10;&#10;DATABASES = {&#10;    'default': {&#10;        'ENGINE': 'django.db.backends.postgresql',&#10;        'NAME': os.environ.get('POSTGRES_DB', 'MyPostgresDB'),&#10;        'USER': os.environ.get('POSTGRES_USER', 'root'),&#10;        'PASSWORD': os.environ.get('POSTGRES_PASSWORD', '123456'),&#10;        'HOST': os.environ.get('POSTGRES_HOST', 'postgres'),&#10;        'PORT': os.environ.get('POSTGRES_PORT', '5439'),&#10;    },&#10;}&#10;&#10;CELERY_BEAT_SCHEDULE = {&#10;    &quot;retrain-cf-model-every-6h&quot;: {&#10;        &quot;task&quot;: &quot;apps.recommendations.tasks.train_cf_model_task&quot;,&#10;        &quot;schedule&quot;: 21600.0,  # 6 giờ&#10;    },&#10;}&#10;&#10;&#10;AUTH_PASSWORD_VALIDATORS = []&#10;&#10;LANGUAGE_CODE = 'en-us'&#10;TIME_ZONE = 'Asia/Ho_Chi_Minh'&#10;USE_I18N = True&#10;USE_TZ = True&#10;&#10;STATIC_URL = 'static/'&#10;STATIC_ROOT = os.path.join(BASE_DIR, 'staticfiles')&#10;STATICFILES_DIRS = []&#10;&#10;DEFAULT_AUTO_FIELD = 'django.db.models.BigAutoField'&#10;&#10;# Celery Configuration&#10;CELERY_BROKER_URL = os.environ.get('CELERY_BROKER_URL', 'redis://redis:6379/0')&#10;CELERY_RESULT_BACKEND = os.environ.get('CELERY_RESULT_BACKEND', 'redis://redis:6379/0')&#10;CELERY_TASK_TRACK_STARTED = True&#10;CELERY_TASK_TIME_LIMIT = int(os.environ.get(&quot;CELERY_TASK_TIME_LIMIT&quot;, &quot;1800&quot;))  # 30 minutes default&#10;CELERY_ACCEPT_CONTENT = ['json']&#10;CELERY_TASK_SERIALIZER = 'json'&#10;CELERY_RESULT_SERIALIZER = 'json'&#10;&#10;# CORS Configuration&#10;CORS_ALLOWED_ORIGINS = [&#10;    &quot;http://localhost:3000&quot;,  # React default port&#10;    &quot;http://localhost:5173&quot;,  # Vite default port&#10;    &quot;http://localhost:4200&quot;,  # Angular default port&#10;    &quot;http://localhost:8080&quot;,  # Vue default port&#10;    &quot;http://127.0.0.1:3000&quot;,&#10;    &quot;http://127.0.0.1:5173&quot;,&#10;    &quot;http://127.0.0.1:4200&quot;,&#10;    &quot;http://127.0.0.1:8080&quot;,&#10;    &quot;https://careermate-rho.vercel.app&quot;,  # Production frontend&#10;    &quot;null&quot;,  # Allow file:// protocol for local HTML testing&#10;]&#10;&#10;# Allow credentials (cookies, authorization headers, etc.)&#10;CORS_ALLOW_CREDENTIALS = True&#10;&#10;# Allow all headers and methods for development&#10;CORS_ALLOW_HEADERS = [&#10;    'accept',&#10;    'accept-encoding',&#10;    'authorization',&#10;    'content-type',&#10;    'dnt',&#10;    'origin',&#10;    'user-agent',&#10;    'x-csrftoken',&#10;    'x-requested-with',&#10;]&#10;&#10;CORS_ALLOW_METHODS = [&#10;    'DELETE',&#10;    'GET',&#10;    'OPTIONS',&#10;    'PATCH',&#10;    'POST',&#10;    'PUT',&#10;]&#10;&#10;# For production, you should also update ALLOWED_HOSTS&#10;# ALLOWED_HOSTS = ['yourdomain.com', 'www.yourdomain.com']" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/apps/recommendation_agent/services/job_service.py">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/apps/recommendation_agent/services/job_service.py" />
              <option name="updatedContent" value="&quot;&quot;&quot;&#10;Job Indexing Service for syncing jobs to Weaviate&#10;&quot;&quot;&quot;&#10;import logging&#10;&#10;logger = logging.getLogger(__name__)&#10;&#10;&#10;class JobIndexingService:&#10;    &quot;&quot;&quot;Service for indexing jobs to Weaviate&quot;&quot;&quot;&#10;    &#10;    @staticmethod&#10;    def sync_single_job_to_weaviate(job_id):&#10;        &quot;&quot;&quot;&#10;        Sync a single job to Weaviate&#10;        &#10;        Args:&#10;            job_id: ID of the job to sync&#10;            &#10;        Returns:&#10;            bool: True if successful, False otherwise&#10;        &quot;&quot;&quot;&#10;        try:&#10;            from ..models import JobPostings, JobDescription&#10;            from .weaviate_service import index_job, delete_job&#10;            &#10;            # Get job from database&#10;            try:&#10;                job = JobPostings.objects.select_related('recruiter').prefetch_related(&#10;                    'jobdescription_set__jd_skill'&#10;                ).get(id=job_id)&#10;            except JobPostings.DoesNotExist:&#10;                logger.warning(f&quot;Job {job_id} not found in database&quot;)&#10;                return False&#10;            &#10;            # If job is not active, remove from Weaviate&#10;            if job.status != 'ACTIVE':&#10;                return delete_job(job_id)&#10;            &#10;            # Prepare job data for indexing&#10;            skills = [jd.jd_skill.name for jd in job.jobdescription_set.all()]&#10;            &#10;            job_data = {&#10;                'job_id': job.id,&#10;                'title': job.title,&#10;                'description': job.description or '',&#10;                'skills': skills,&#10;                'company_name': job.recruiter.company_name,&#10;                'address': job.address or '',&#10;            }&#10;            &#10;            # Index to Weaviate&#10;            return index_job(job_data)&#10;            &#10;        except Exception as e:&#10;            logger.error(f&quot;Error syncing job {job_id} to Weaviate: {str(e)}&quot;)&#10;            return False&#10;" />
            </PendingDiffInfo>
          </value>
        </entry>
      </map>
    </option>
  </component>
</project>